<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ZHAZ Repairs • Login</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="bg">
<a class="brand-logo" href="/">
  <img src="{{ url_for('static', filename='imagens/zhaz-logo.png') }}" alt="ZHAZ">
  <span class="wordmark">ZHAZ</span>
  <span class="tagline">Soluções de A a Z</span>
</a>
<div class="wrap">
  <h1 class="title">Acesso ao Sistema</h1>
  <p class="muted">Escolha seu tipo de acesso.</p>
  <div class="grid">
    <div class="card">
      <h2>Rodrigo (Admin)</h2>
      <input id="adm-email" class="input" placeholder="E-mail">
      <input id="adm-senha" class="input" type="password" placeholder="Senha">
      <button class="btn btn-verde" id="btn-adm">Entrar</button>
    </div>
    <div class="card">
      <h2>Diretoria</h2>
      <input id="dir-email" class="input" placeholder="E-mail">
      <input id="dir-senha" class="input" type="password" placeholder="Senha">
      <button class="btn btn-azul" id="btn-dir">Entrar</button>
    </div>
    <div class="card">
      <h2>Técnico</h2>
      <input id="tec-nome" class="input" placeholder="Nome completo">
      <input id="tec-email" class="input" placeholder="E-mail">
      <button class="btn btn-claro" id="btn-tec">Entrar</button>
    </div>
  </div>
</div>
<script>
async function post(url, body){
  const r = await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});
  if(!r.ok){ const e = await r.json().catch(()=>({erro:'Erro'})); alert(e.erro||'Erro'); throw new Error(); }
  return r.json();
}
function go(p){ location.href=p; }
document.getElementById('btn-adm').onclick = async ()=>{
 await post('/login/admin',{email:document.getElementById('adm-email').value.trim(),senha:document.getElementById('adm-senha').value});
go('/admin/os');   <!-- em vez de /registrar_os -->

};
document.getElementById('btn-dir').onclick = async ()=>{
  await post('/login/diretoria',{email:document.getElementById('dir-email').value.trim(),senha:document.getElementById('dir-senha').value});
  go('/dashboard');
};
document.getElementById('btn-tec').onclick = async ()=>{
  await post('/login/tecnico',{nome:document.getElementById('tec-nome').value.trim(),email:document.getElementById('tec-email').value.trim()});
  go('/registrar_os');
};
</script>
</body>
</html>
